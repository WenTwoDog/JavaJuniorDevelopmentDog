"use strict";(self["webpackChunkgrad_project"]=self["webpackChunkgrad_project"]||[]).push([[599],{9599:function(t,e,l){l.r(e),l.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("el-table",{attrs:{data:t.users}},[e("el-table-column",{attrs:{label:"昵称",prop:"name"}}),e("el-table-column",{attrs:{label:"创建时间",prop:"day"}}),e("el-table-column",{attrs:{label:"禁言时间",prop:"banday"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"600"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.selectVideoClick(l.row)}}},[t._v("查看视频评论")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.selectBlogClick(l.row)}}},[t._v("查看博客评论")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.showDialog(l.row)}}},[t._v("禁言")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.delectClick(l.row)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{title:"选择禁言时间",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-col",{attrs:{span:11}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.banday,callback:function(e){t.$set(t.form,"banday",e)},expression:"form.banday"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.banClick()}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"该用户评论",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[e("el-table",{attrs:{data:t.gridData}},[e("el-table-column",{attrs:{property:"date",label:"日期",width:"300"}}),e("el-table-column",{attrs:{property:"text",label:"内容"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.deleteComment(l.row)}}},[t._v("删除")])]}}])})],1),e("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")])],1)],1)},s=[],o=l(8739);const i={inject:["reload"],data(){return{users:[],dialogFormVisible:!1,dialogTableVisible:!1,form:{id:"",banday:""},gridData:[],commentForm:{type:0,id:0}}},mounted:function(){this.getUsers()},methods:{selectVideoClick(t){o.Z.request({baseURL:"http://localhost:8090/",url:"/comment/selectV?name="+t.name,method:"get",headers:{"Content-Type":"application/json"}}).then((t=>{this.gridData=t.data})),this.dialogTableVisible=!0},selectBlogClick(t){this.commentForm.type=1,o.Z.request({baseURL:"http://localhost:8090",url:"/comment/selectB?name="+t.name,method:"get",headers:{"Content-Type":"application/json"}}).then((t=>{this.gridData=t.data})),this.dialogTableVisible=!0},deleteComment(t){this.$confirm("此操作将永久删除该评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.commentForm.id=t.id,o.Z.request({baseURL:"http://localhost:8090/",url:"/comment/delete?type="+this.commentForm.type+"&id="+this.commentForm.id,method:"get",headers:{"Content-Type":"application/json"}}).then((t=>{t.data?(this.$message({type:"success",message:"删除成功!"}),this.reload()):this.$message({type:"fail",message:"删除失败!"})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},banClick(){o.Z.request({baseURL:"http://localhost:8090/",url:"/user/update",data:this.form,method:"post",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((t=>{t.data?(alert("禁言成功"),this.reload()):alert("禁言失败")})),this.dialogFormVisible=!1},showDialog(t){this.dialogFormVisible=!0,this.form.id=t.id},delectClick(t){this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{o.Z.request({baseURL:"http://localhost:8090/",url:"/user/delete",data:t.id,method:"post",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((t=>{t.data?(this.$message({type:"success",message:"删除成功!"}),this.reload()):this.$message({type:"fail",message:"删除失败!"})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},getUsers(){o.Z.request({baseURL:"http://localhost:8090/",url:"/user/select",method:"post",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((t=>{this.users=t.data}))}}};var n=i,r=n,c=l(1001),d=(0,c.Z)(r,a,s,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=599.fb7fb389.js.map