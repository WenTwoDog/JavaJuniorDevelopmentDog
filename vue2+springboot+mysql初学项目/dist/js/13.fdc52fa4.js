"use strict";(self["webpackChunkgrad_project"]=self["webpackChunkgrad_project"]||[]).push([[13],{5013:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Xgplayer",{attrs:{config:e.config},on:{player:function(t){e.Player=t}}}),t("el-select",{model:{value:e.videoIndex,callback:function(t){e.videoIndex=t},expression:"videoIndex"}},e._l(e.videoform,(function(e,o){return t("el-option",{key:o,attrs:{label:e.name,value:o}})})),1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.pushVideo()}}},[e._v("跳转")]),t("el-input",{attrs:{placeholder:"发表评论"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}}),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit(0)}}},[e._v("评论")]),e._l(e.List,(function(o,s){return t("el-card",{key:s,staticClass:"box-card"},e._l(o,(function(o,s){return t("div",{key:s},[0==s?t("div",[t("h3",[e._v(e._s(o.userName)+" 评论: "+e._s(o.text))]),t("el-popover",{attrs:{placement:"bottom",title:"回复评论",width:"200",trigger:"click"}},[t("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("评论")]),t("el-input",{attrs:{placeholder:"发表评论"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}}),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit(o.id)}}},[e._v("评论")])],1)],1):e._e(),0!=s?t("span",[e._v(e._s(o.userName)+" 回复: "+e._s(o.text))]):e._e()])})),0)}))],2)},i=[],n=o(8739),a=o(6309);const r={inject:["reload"],data(){return{config:{id:"vs",url:this.$store.state.video.url,width:"100%",height:600,playbackRate:[.5,.75,1,1.5,2]},Player:null,List:null,form:{text:"",date:new Date,videoId:this.$store.state.video.id,userName:this.$store.state.name,seniorId:0},ban:!0,commentShow:!1,videoform:"",videoIndex:""}},methods:{getVideoComment(){n.Z.request({baseURL:"http://localhost:8090/",url:"/comment/videoComment",method:"post",data:this.$store.state.video.id,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((e=>{this.List=e.data}))},async submit(e){await n.Z.request({baseURL:"http://localhost:8090/",url:"/user/selectByName?name="+this.$store.state.name,method:"get",async:!1,headers:{"Content-Type":"application/json"}}).then((e=>{var t=new Date(e.data.banday)<new Date;this.ban=t})),this.ban?(this.form.seniorId=e,n.Z.request({baseURL:"http://localhost:8090/",url:"/comment/addVcomment",method:"post",data:this.form,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((e=>{alert("评论成功"),this.form.text="",this.reload()}))):alert("您已被禁言")},getVideoXiLie(){n.Z.request({baseURL:"http://localhost:8090/",url:"/video/selectVideoXiLie",method:"post",data:this.$store.state.video.collection,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((e=>{console.log("返回"),console.log(e.data),this.videoform=e.data}))},pushVideo(){this.$store.state.video.name!=this.videoform[this.videoIndex].name?(this.$store.commit("saveVideo",this.videoform[this.videoIndex]),this.reload()):alert("您已在此视频下")}},components:{Xgplayer:a.Z},mounted:function(){this.getVideoComment(),this.getVideoXiLie()}};var l=r,d=l,c=o(1001),u=(0,c.Z)(d,s,i,!1,null,null,null),h=u.exports}}]);
//# sourceMappingURL=13.fdc52fa4.js.map