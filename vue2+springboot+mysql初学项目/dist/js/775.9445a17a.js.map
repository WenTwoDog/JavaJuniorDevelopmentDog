{"version":3,"file":"js/775.9445a17a.js","mappings":"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","sources":["webpack://grad_project/./src/views/Form/VideoForm.vue","webpack://grad_project/src/views/Form/VideoForm.vue","webpack://grad_project/./src/views/Form/VideoForm.vue?958f","webpack://grad_project/./src/views/Form/VideoForm.vue?fadf"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"http://localhost:8090/video/uploadVideo/\",\"on-success\":_vm.getUrl,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove,\"multiple\":\"\",\"limit\":2,\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList,\"before-upload\":_vm.beforeAvatarUpload}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('span',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"请上传您的视频(mp4)和图片(jpg)，如果不是头视频可以不上传图片\")])],1),_c('el-form-item',{attrs:{\"label\":\"视频标题\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"视频类型\"}},[_c('el-select',{model:{value:(_vm.form.lessonId),callback:function ($$v) {_vm.$set(_vm.form, \"lessonId\", $$v)},expression:\"form.lessonId\"}},_vm._l((_vm.lessons),function(lesson,index){return _c('el-option',{key:index,attrs:{\"label\":lesson.name,\"value\":lesson.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"选择系列\"}},[_c('el-switch',{attrs:{\"active-text\":\"并入现有系列\",\"inactive-text\":\"创建新系列\"},model:{value:(_vm.chooseCollection),callback:function ($$v) {_vm.chooseCollection=$$v},expression:\"chooseCollection\"}}),_c('br'),(_vm.chooseCollection)?_c('el-select',{attrs:{\"placeholder\":\"请选择视频所属系列\"},model:{value:(_vm.form.collection),callback:function ($$v) {_vm.$set(_vm.form, \"collection\", $$v)},expression:\"form.collection\"}},_vm._l((_vm.collections),function(collection,index){return _c('el-option',{key:index,attrs:{\"label\":collection,\"value\":collection}})}),1):_vm._e(),(!_vm.chooseCollection)?_c('el-input',{model:{value:(_vm.bufferCollection),callback:function ($$v) {_vm.bufferCollection=$$v},expression:\"bufferCollection\"}}):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"视频简介\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.brief),callback:function ($$v) {_vm.$set(_vm.form, \"brief\", $$v)},expression:\"form.brief\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即创建\")]),_c('el-button',[_vm._v(\"取消\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 创建视频 -->\r\n\r\n<template>\r\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n        <el-upload class=\"upload-demo\" action='http://localhost:8090/video/uploadVideo/' :on-success=\"getUrl\"\r\n            :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" :before-remove=\"beforeRemove\" multiple :limit=\"2\"\r\n            :on-exceed=\"handleExceed\" :file-list=\"fileList\" :before-upload=\"beforeAvatarUpload\">\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            <span slot=\"tip\" class=\"el-upload__tip\">请上传您的视频(mp4)和图片(jpg)，如果不是头视频可以不上传图片</span>\r\n        </el-upload>\r\n        <el-form-item label=\"视频标题\">\r\n            <el-input v-model=\"form.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"视频类型\">\r\n            <el-select v-model=\"form.lessonId\">\r\n                <el-option v-for='(lesson, index) in lessons' :key=\"index\" :label=lesson.name :value=lesson.id></el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择系列\">\r\n            <el-switch v-model=\"chooseCollection\" active-text=\"并入现有系列\" inactive-text=\"创建新系列\"></el-switch><br>\r\n            <el-select v-model=\"form.collection\" placeholder=\"请选择视频所属系列\" v-if=\"chooseCollection\">\r\n                <el-option v-for='(collection, index) in collections' :key=\"index\" :label=collection\r\n                    :value=collection></el-option>\r\n            </el-select>\r\n            <el-input v-model=\"bufferCollection\" v-if=\"!chooseCollection\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"视频简介\">\r\n            <el-input type=\"textarea\" v-model=\"form.brief\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\r\n            <el-button>取消</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n    inject: ['reload'],\r\n    data() {\r\n        return {\r\n            fileList: [],\r\n            form: {\r\n                name: '',\r\n                url: 0,\r\n                date: new Date(),\r\n                lessonId: 1,\r\n                userId: '',\r\n                imgurl: 0,\r\n                collection: '',\r\n                leader: 0,\r\n                brief: ''\r\n            },\r\n            collections: [],\r\n            chooseCollection: true,\r\n            bufferCollection: '',\r\n            hook: 0,\r\n            lessons: [],\r\n        };\r\n    },\r\n    methods: {\r\n        getUrl(res) {\r\n            if (res.dataOne == \"jpg\") {\r\n                this.form.imgurl = res.dataTwo;\r\n\r\n                this.$message(\"图片已成功上传\");\r\n\r\n            } else if (res.dataOne == \"mp4\") {\r\n                this.form.url = res.dataTwo;\r\n                this.$message(\"视频已成功上传\");\r\n            } else {\r\n                this.$message(res.dataOne);\r\n            }\r\n        },\r\n        handleRemove(file, fileList) {\r\n            console.log(file, fileList);\r\n        },\r\n        handlePreview(file) {\r\n            console.log(file);\r\n        },\r\n        handleExceed(files, fileList) {\r\n            this.$message.warning(`当前限制选择 2 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n        },\r\n        beforeRemove(file, fileList) {\r\n            //移除该文件\r\n            if (this.getFileType(file) === 'jpg') {\r\n                this.deleteByFilename(this.form.imgurl);\r\n            } else {\r\n                this.deleteByFilename(this.form.url)\r\n            }\r\n\r\n        },\r\n        getCollection() {\r\n            axios.request({\r\n                baseURL: \"http://localhost:8090/\",\r\n                url: \"/video/getCollection\",\r\n                method: 'get',\r\n                headers: { 'Content-Type': 'application/json' }\r\n            })\r\n                .then(res => {\r\n                    this.collections = res.data;\r\n                });\r\n        },\r\n        onSubmit() {\r\n\r\n            if (!this.chooseCollection) {\r\n                this.collections.forEach(collection => {\r\n                    if (this.bufferCollection == collection) {\r\n                        this.$message(\"该系列重名，请更改系列名称\");\r\n                        this.hook = 1;\r\n                    }\r\n                });\r\n                this.form.collection = this.bufferCollection;\r\n                this.form.leader = 1;\r\n                if (this.hook) { return };\r\n\r\n                if (this.form.imgurl == 0) { this.$message(\"该系列需要一张封面\"); return; };\r\n            };\r\n\r\n            if (this.form.url == 0) { this.$message(\"您还未上传视频\"); return; };\r\n            if(this.form.leader){\r\n                console.log(this.form);\r\n                axios.request({\r\n                baseURL: \"http://localhost:8090/\",\r\n                url: \"/video/addNewVideo\",\r\n                data: this.form,\r\n                method: 'post',\r\n                headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' }\r\n            })\r\n                .then(res => {\r\n                    alert(res.data);\r\n                    this.reload();\r\n                });\r\n            }else{\r\n                axios.request({\r\n                baseURL: \"http://localhost:8090/\",\r\n                url: \"/video/addOldVideo\",\r\n                data: this.form,\r\n                method: 'post',\r\n                headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' }\r\n            })\r\n                .then(res => {\r\n                    alert(\"成功上传\");\r\n                    this.reload();\r\n                });\r\n            }\r\n            \r\n        },\r\n        //传文件名删本地文件\r\n        deleteByFilename(Url) {\r\n            axios.request({\r\n                baseURL: \"http://localhost:8090/\",\r\n                url: \"/video/deleteFile\",\r\n                data: Url,\r\n                method: 'post',\r\n                headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' }\r\n            })\r\n                .then(res => {\r\n                    return res;\r\n                });\r\n        },\r\n        //检测上传文件类型\r\n        beforeAvatarUpload(file) {\r\n            const type = this.getFileType(file);\r\n            const isJPG = type == 'jpg';\r\n            const isMKV = type == 'mp4';\r\n            if (!isJPG && !isMKV) {\r\n                this.$message(\"请上传jpg或mkv类型\");\r\n            }\r\n            return isJPG || isMKV;\r\n        },\r\n        getFileType(file) {\r\n            let str = file.name;\r\n            str = str.toString();\r\n            str = str.substring(str.length-3)\r\n            return str;\r\n        },\r\n        getLessons() {\r\n            axios.request({\r\n                baseURL: \"http://localhost:8090/\",\r\n                url: \"/video/selectLesson\",\r\n                method: 'get',\r\n                headers: { 'Content-Type': 'application/json' }\r\n            })\r\n                .then(res => {\r\n                    this.lessons = res.data;\r\n                });\r\n        }\r\n    },\r\n    mounted: function () {\r\n        this.getCollection();\r\n        this.getLessons();\r\n    }\r\n}\r\n\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VideoForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoForm.vue?vue&type=template&id=8c1a55aa&\"\nimport script from \"./VideoForm.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","attrs","form","staticClass","getUrl","handlePreview","handleRemove","beforeRemove","handleExceed","fileList","beforeAvatarUpload","_v","slot","model","value","name","callback","$$v","$set","expression","lessonId","_l","lessons","lesson","index","key","id","chooseCollection","collection","collections","_e","bufferCollection","brief","on","onSubmit","staticRenderFns","inject","data","url","date","Date","userId","imgurl","leader","hook","methods","res","dataOne","dataTwo","$message","file","console","log","files","warning","length","getFileType","deleteByFilename","getCollection","axios","baseURL","method","headers","then","forEach","alert","reload","Url","type","isJPG","isMKV","str","toString","substring","getLessons","mounted","component"],"sourceRoot":""}