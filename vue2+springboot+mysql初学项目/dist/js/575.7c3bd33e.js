"use strict";(self["webpackChunkgrad_project"]=self["webpackChunkgrad_project"]||[]).push([[575],{8575:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("h1",[t._v(t._s(t.blog.name))]),e("span",[t._v("作者：")]),e("span",[t._v(t._s(t.blog.userName))]),e("br"),e("span",[t._v("发布时间：")]),e("span",[t._v(t._s(t.blog.date))]),e("br"),e("div",{staticClass:"html",domProps:{innerHTML:t._s(t.blog.content)}}),e("el-input",{attrs:{placeholder:"发表评论"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}}),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit(0)}}},[t._v("评论")]),t._l(t.List,(function(s,o){return e("el-card",{key:o,staticClass:"box-card"},t._l(s,(function(s,o){return e("div",{key:o},[0==o?e("div",[e("h3",[t._v(t._s(s.userName)+" 评论: "+t._s(s.text))]),e("el-popover",{attrs:{placement:"bottom",title:"标题",width:"200",trigger:"click"}},[e("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("评论")]),e("el-input",{attrs:{placeholder:"发表评论"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}}),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit(s.id)}}},[t._v("评论")])],1)],1):t._e(),0!=o?e("span",[t._v(t._s(s.userName)+" 回复: "+t._s(s.text))]):t._e()])})),0)}))],2)},n=[],a=s(8739);const r={inject:["reload"],data(){return{blog:this.$store.state.blog,List:"",form:{text:"",date:new Date,blogId:this.$store.state.blog.id,userName:this.$store.state.name,seniorId:0},ban:"",commentShow:!1}},methods:{getBlogComment(){a.Z.request({baseURL:"http://localhost:8090/",url:"/comment/blogComment",method:"post",data:this.$store.state.blog.id,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((t=>{this.List=t.data}))},submit(t){a.Z.request({baseURL:"http://localhost:8090/",url:"/user/selectByName?name="+this.$store.state.name,method:"get",headers:{"Content-Type":"application/json"}}).then((e=>{this.ban=new Date(e.data.banday)<new Date,this.ban?(this.form.seniorId=t,a.Z.request({baseURL:"http://localhost:8090/",url:"/comment/addBcomment",method:"post",data:this.form,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then((t=>{this.$message("评论成功"),this.form.text="",this.reload()}))):this.$message("您已被禁言")}))}},mounted:function(){this.getBlogComment()}};var l=r,i=l,u=s(1001),m=(0,u.Z)(i,o,n,!1,null,null,null),c=m.exports}}]);
//# sourceMappingURL=575.7c3bd33e.js.map